<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ME-X | Sicily Luxury Concierge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;1,400&family=Montserrat:wght@200;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; background: #fff; color: #1a1a1a; scroll-behavior: smooth; }
        .serif { font-family: 'Cormorant Garamond', serif; }
        .luxury-card:hover { transform: translateY(-10px); border-color: #000; transition: 0.5s; }
        .cart-float { position: fixed; bottom: 30px; right: 30px; background: #000; color: #fff; padding: 20px 40px; border-radius: 50px; cursor: pointer; display: none; z-index: 1000; box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
    </style>
</head>
<body>

    <nav class="flex justify-between items-center px-10 py-8 fixed w-full z-50 bg-white/80 backdrop-blur-md">
        <div class="text-[10px] tracking-widest font-bold uppercase">Messina / Sicily</div>
        <div class="text-3xl serif italic tracking-[0.2em]">ME-X</div>
        <div class="flex gap-8 text-[10px] font-bold uppercase tracking-widest">
            <a href="#exp">Experiences</a>
            <a href="#ser">Services</a>
            <a href="/login" class="text-gray-400">Login</a>
        </div>
    </nav>

    <header class="h-screen flex items-center justify-center relative bg-black">
        <img src="https://images.unsplash.com/photo-1544148103-0773bf10d330" class="absolute inset-0 w-full h-full object-cover opacity-60">
        <div class="relative z-10 text-center text-white p-6">
            <h1 class="text-7xl md:text-9xl serif italic font-light mb-6">Unveiling Sicily</h1>
            <p class="max-w-xl mx-auto text-xs uppercase tracking-[0.4em] opacity-80 leading-loose">Esperienze private e concierge d'eccellenza nello Stretto di Messina.</p>
        </div>
    </header>

    <section id="exp" class="py-32 px-10 max-w-7xl mx-auto">
        <h2 class="text-5xl serif italic mb-20 text-center">Elite Experiences</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-20">
            <div class="luxury-card border p-10 rounded-[3rem]" onclick="addToCart('La Notte del Mito', 120, '2026-02-25', '20:30')">
                <img src="https://images.unsplash.com/photo-1516939884455-1445c8652f83" class="w-full h-64 object-cover rounded-2xl mb-8">
                <span class="text-[10px] text-amber-600 font-bold uppercase tracking-widest italic">Culture & Sea</span>
                <h3 class="text-3xl serif italic mt-2 mb-4">La Notte del Mito</h3>
                <p class="text-xs text-gray-500 leading-relaxed mb-10">Tour privato su Feluca storica tra Scilla e Cariddi.</p>
                <button class="w-full py-4 bg-black text-white text-[10px] font-bold uppercase tracking-widest">Aggiungi al Carrello - € 120</button>
            </div>
            </div>
    </section>

    <div id="cart-float" class="cart-float" onclick="checkout()">
        CART (<span id="count">0</span>) • CHECKOUT
    </div>

    <script>
        let cart = [];
        const stripe = Stripe('TUA_CHIAVE_PUBBLICA');

        function addToCart(name, price, date, time) {
            cart.push({ name, price, date, time });
            document.getElementById('count').innerText = cart.length;
            document.getElementById('cart-float').style.display = 'block';
            alert(name + " aggiunto al tuo viaggio.");
        }

        async function checkout() {
            const email = prompt("Inserisci l'email per ricevere i voucher PDF:");
            if(!email) return;
            const res = await fetch('/api/create-luxury-checkout', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ cart, customerEmail: email })
            });
            const session = await res.json();
            await stripe.redirectToCheckout({ sessionId: session.id });
        }
    </script>
</body>
</html>
// Inserisci questo script in fondo a index.html
window.onload = function() {
    const urlParams = new URLSearchParams(window.location.search);
    const partnerId = urlParams.get('ref');
    
    if (partnerId) {
        // Memorizza l'ID del partner per il checkout
        localStorage.setItem('mex_partner_id', partnerId);
        
        // Estetica Co-Brand: Mostra un messaggio di benvenuto
        const welcomeMsg = document.createElement('div');
        welcomeMsg.className = "fixed top-24 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur px-6 py-2 rounded-full shadow-lg z-50 text-[10px] uppercase font-bold tracking-widest border border-amber-200 animate-bounce";
        welcomeMsg.innerHTML = `Welcome guest of <span class="text-amber-600">${partnerId.replace(/_/g, ' ')}</span>`;
        document.body.appendChild(welcomeMsg);
    }
};
